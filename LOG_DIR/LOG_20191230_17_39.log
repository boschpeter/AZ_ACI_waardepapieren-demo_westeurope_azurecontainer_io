#######################
## variables
#######################
PROJECT_DIR=/Users/boscp08/Projects/scratch/virtual-insanity
GIT_USER=BoschPeter
GIT_REPO=AZ_ACI_waardepapieren-demo_westeurope_azurecontainer_io
GITHUB_DIR=/Users/boscp08/Projects/scratch/virtual-insanity/AZ_ACI_waardepapieren-demo_westeurope_azurecontainer_io
DOCKER_USER=boscp08
COMPOSE_BUILD_FLAG= --build
MOCK_NLX_IMAGE=waardepapieren_mock-nlx
SERVICE_IMAGE=waardepapieren_waardepapieren-service
CLERK_FRONTEND_IMAGE=waardepapieren_clerk-frontend
DOCKERHUB_MOCK_NLX_IMAGE=waardepapieren-mock-nlx
DOCKERHUB_SERVICE_IMAGE=waardepapieren-waardepapieren-service
DOCKERHUB_CLERK_FRONTEND_IMAGE=waardepapieren-clerk-frontend
DOCKER_VERSION_TAG=4.0
AZ_RESOURCE_GROUP=Discipl_Wigo4it_DockerGroup4
AZ_DNSNAMELABEL=discipl
TARGET_HOST=azure_container_instance
AZ_TLD=azurecontainer.io
TIMEZONE=
CERT_HOST_IP=discipl.westeurope.azurecontainer.io
CERT_HOST_IP_WP_SERVICE_HOSTNAME=discipl.westeurope.azurecontainer.io
#######################
## variables
#######################
| 20191230_17_39 | docker-compose-travis.yml|
| 20191230_17_39 | /Users/boscp08/Projects/scratch/virtual-insanity/AZ_ACI_waardepapieren-demo_westeurope_azurecontainer_io |
<code>
version: '3'
services:
  waardepapieren-service:
    volumes:
      - ./waardepapieren-service/system-test/certs:/certs:ro
      - ./waardepapieren-service/system-test/ephemeral-certs:/ephemeral-certs:ro
      - ./waardepapieren-service/configuration/:/app/configuration:ro
    build: waardepapieren-service/.
    # network_mode: host
    #networks:
    #  test:
    links:
      - mock-nlx
    ports:
      - 3232:3232
      - 3233:3233
    environment:
      - WAARDEPAPIEREN_CONFIG=/app/configuration/waardepapieren-config-compose-travis.json
      # Ignore self-signed ephemeral cert issues
      - NODE_TLS_REJECT_UNAUTHORIZED=0
  clerk-frontend:
    build:
      #network_mode: host
    #  networks:
    #  test:
      context: clerk-frontend/
      args:
        - CERTIFICATE_HOST=http://discipl.westeurope.azurecontainer.io:8880
    links:
      - waardepapieren-service
        ports:
      - 443:443
      - 8880:8880

    healthcheck:
      test: service nginx status
    volumes:
      - ./clerk-frontend/nginx/certs:/etc/nginx/certs:ro
  mock-nlx:
    build: mock-nlx/
    #network_mode: host
    #networks:
    #  test:
    ports:
      - 80:80
    
    #networks:
    #test:
    #driver: bridge
</code>
20191230_17_39 - END JOB :
-----------------------------------------------------------------------------

-----------------------------------------------------------------------------
